{% extends 'base_generic.html' %}

{% block content %}
{% load static %} 

<link rel="stylesheet" type="text/css" href="/static/css/book.css">

<section class="container">    
        <form method="POST" action="{% url 'request_booking' accommodation.id %}">
            {% csrf_token %}
            <div id="form1" class="form visible">
                <h1>Datos de la reserva para {{accommodation.name}}</h1>    
                {{form.as_p}}
            </div>

            <div id="form2" class="form">
                <h1>Datos del usuario</h1>
                   {{user_form.as_p}}
                <div class="form row-spaced" id="divform2">
                   <button id="back" class="filled-button mt-3">
                       Atras
                   </button>
                   <button type='submit' class="filled-button mt-3">
                       Confirmar
                   </button>
                </div>
            </div>
            
        </form>
        <div id="divform1" class="form row-spaced visible">
            <button id="return" class="filled-button mt-3">
                Volver
            </button>
            <button id="next" class="filled-button mt-3" >
                Siguiente
            </button>
        </div>
        <div class="row">
            <div class="circulo"></div>
            <div class="circulo activo"></div>
        </div>
    

    <script> 
        document.addEventListener('DOMContentLoaded', function() {
            var form1 = document.getElementById('form1');
            var form2 = document.getElementById('form2'); 
            var div_form1 = document.getElementById('divform1');
            var div_form2 = document.getElementById('divform2');
        
            document.getElementById('return').addEventListener('click', function() {
                
                
                let urlComplete = window.location.href;

                let url = new URL(urlComplete);
                var relativeUrl = url.pathname;

                var absoluteUrl = window.location.href;
                var urlServer = absoluteUrl.replace(relativeUrl, '');

                window.location.href = urlServer;
            });

            document.getElementById('next').addEventListener('click', function() {
                form1.classList.toggle('visible');
                form2.classList.toggle('visible');
                div_form1.classList.toggle('visible');
                div_form2.classList.toggle('visible');

                // Cambiar el círculo activo
                document.querySelectorAll('.circulo').forEach(function(c) {
                    c.classList.toggle('activo');
                });
            });

            document.getElementById('back').addEventListener('click', function() {
                form1.classList.toggle('visible');
                form2.classList.toggle('visible');
                div_form1.classList.toggle('visible');
                div_form2.classList.toggle('visible');
        
                // Cambiar el círculo activo
                document.querySelectorAll('.circulo').forEach(function(c) {
                    c.classList.toggle('activo');
                });
            });
        });
        
    </script>
</section>

{% endblock %}