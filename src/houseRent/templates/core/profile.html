{% extends 'base_generic.html' %}
{% load static %}

{% block content %}

<div class="profile">
    <section class="contenedor">
        <header>Perfil de {{ user.username }}</header>
        <form method="post" action="{% url 'profile' %}" class="formulario">
            {% csrf_token %}

            <!-- Campo de nombre de usuario -->
            <div class="entrada">
                <label for="username">Nombre de Usuario:</label>
                <input type="text" id="username" class="input" name="username" required value="{{ user.username }}">
            </div>
        
            <div class="entrada">
                <label for="first_name">Nombre:</label>
                <input type="text" id="first_name" class="input" name="first_name" required value="{{ user.first_name }}">
            </div>
            
            <div class="entrada">
                <label for="last_name">Apellidos:</label>
                <input type="text" id="last_name" class="input" name="last_name" required value="{{ user.last_name }}">
            </div>
            
            <div class="entrada">
                <label for="email">Correo electrónico:</label>
                <input type="email" id="email" class="input" name="email" required value="{{ user.email }}">
            </div>
            

             <!-- Campo de contraseña -->
            <div class="entrada">
                <label for="password">Contraseña:</label>
                <input type="password" id="password" class="input" name="password" required>
            </div>
            
            <!-- Otros campos de CustomUser -->
            <div class="entrada">
                <label for="birth_date">Fecha de Nacimiento:</label>
                <input type="date" id="birth_date" class="input" name="birth_date" required value="{{ user.formated_birth_date }}">
            </div>
                
            <div class="entrada">
                <label for="phone">Teléfono:</label>
                {{ userForm.phone }}
            </div>
   
            <div class="entrada">
                <label for="dni">DNI:</label>
                <input type="text" id="dni" name="dni" class="input" pattern="^\d{8}[a-zA-Z]$" title="Introduzca un DNI válido" required value="{{ user.dni }}">
            </div>
            

            <!-- Campos de la clase dirección -->
            <div class="columna">
                <div class="entrada">
                    <label for="address_line">Calle:</label>
                    <input type="text" id="address_line" class="input" name="address_line" required value="{{ user.address.address_line }}">
                </div>
                <div class="entrada">
                    <label for="street_number">Número:</label>
                    <input type="text" id="street_number" class="input" name="street_number" pattern="^[0-9]*$" title="Introduzca un número válido" required value="{{ user.address.street_number }}">
                </div>
            </div>

            <div class="entrada">
                <label for="country">País:</label>
                <input type="text" id="country" class="input" name="country" title="Introduzca un país válido" required value="{{ user.address.country }}">
            </div>

            <div class="entrada">
                <label for="city">Ciudad:</label>
                <input type="text" id="city" class="input" name="city" required value="{{ user.address.city }}">   
            </div>            
            
            <div class="columna">
                <div class="entrada"> 
                    <label for="region">Provincia:</label>
                    <input type="text" id="region" class="input" name="region" required value="{{ user.address.region }}">
                </div>
                
                <div class="entrada">
                    <label for="postal_code">Código Postal:</label>
                    <input type="text" id="postal_code" class="input" name="postal_code" pattern="^[0-9]*$" title="Introduzca un código postal válido" required value="{{ user.address.postal_code }}">
                </div>    
            </div>

            <!-- Otros campos de CustomUser -->
            <div class="columna">
                <div class="entrada">
                <label for="gender">Género:</label>
                <select id="gender" class="input" name="gender">
                    {% for value, name in gender_choices %}
                        <option value="{{ value }}" {% if user.gender == name %}selected{% endif %}>{{ name }}</option>
                    {% endfor %}
                </select>              
                </div>
            </div>

            <!-- Botón de envío del formulario -->
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-secondary">Guardar</button>
            </div>
        </form>
    </section>
</div>

{% endblock %}