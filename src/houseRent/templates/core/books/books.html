{% extends 'base_generic.html' %}
{% load static %}

{% block content %}
<div class="page-container">
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-logo" href="#">H</a>
            <a class="navbar-brand" href="#">HousRent</a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                    <a class="nav-link text-center" href="#">Sobre Nosotros</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link text-center" href="#">Política</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link text-center" href="#">Ayuda</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link text-center" href="/books">Reservas</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link text-center" href="#">Favoritos</a>
                    </li>
                </ul>
            </div>
            <a class="btn btn-primary" href="/login">Iniciar Sesión</a>
        </div>
    </nav>

    <div class="page-content">
        <div class="row">
            <!-- ... -->
            <!-- Área para mostrar los alojamientos -->
            <div class="col accommodation-container">
                <div class="row">
                    {% for accommodation,book in books.items %}
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-5 card-container">
                            <div class="card">
                                <a href="/books/{{ accommodation.id }}" class="card-overlay">
                                    <h5 class="accommodation-name">{{ accommodation.name }}</h5>
                                </a>
                
                                {% if accommodation.first_image %}
                                    <img src="{{ accommodation.first_image.image.url }}" alt="{{ accommodation.first_image.alt }}" class="card-img-top">
                                {% endif %}
                                <div class="card-body">
                                    <p class="card-text"><b class="price"> {{ accommodation.price }} € </b> Noche</p>
                                    <p class="card-text"><b class="price"> {{ book }}  </b> reservas activas</p>
                                    <!-- Puntuación promedio -->
                                    <div class="rating">
                                        <span class="material-symbols-outlined rating-star">
                                            star
                                        </span>
                                        <p class="card-text">{{ accommodation.average_rating|default:"ND" }}</p>
                                    </div>
                                </div>
                            </div>                          
                        </div>
                    {% empty %}
                        <div class="col-12">
                            <p>No se encontraron alojamientos con los criterios especificados.</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
    </div>    
</div>
{% endblock %}
